<!DOCTYPE html>
<html lang="ja">
    <head>
        <meta charset="UTF-8">
        <link rel="stylesheet" href="slide_contents01.css">
    </head>
    <body>
        <section class="header">
            <h1>スライドコンテンツサンプル</h1>
        </section>
        <div class="HSL01-container">
            <div class="HSL01-body">
<table id="HSL01-body-table">
    <tr>
        <th>No</th>
        <th>作業名</th>
        <th>担当</th>
        <th>工数</th>
    </tr>
    <tr>
        <td>1</td>
        <td>要件定義</td>
        <td></td>
        <td></td>
    </tr>
    <tr>
        <td>2</td>
        <td>外部設計</td>
        <td></td>
        <td></td>
    </tr>
    <tr>
        <td>4</td>
        <td>製造・単体テスト</td>
        <td></td>
        <td></td>
    </tr>
    <tr>
        <td>4-1</td>
        <td>クライアント</td>
        <td></td>
        <td></td>
    </tr>
    <tr>
        <td>4-1-1</td>
        <td>ログイン画面</td>
        <td>TKC-A</td>
        <td>24</td>
    </tr>
    <tr>
        <td>4-2</td>
        <td>サーバ</td>
        <td></td>
        <td></td>
    </tr>
    <tr>
        <td>4-2-1</td>
        <td>グイン処理</td>
        <td>IWA-A</td>
        <td>16</td>
    </tr>
</table>
            </div>
            <div class="HSL01-slide-container">
                <div class="HSL01-slide-body">
                    <div class="HSL01-slide-page-body">
                        <div class="HSL01-slide-page01 HSL01-slide-page-hidden">
<h3>メンバー</h3>
<div class="HSL01-slide-page01-add-member">
    <img src="icon003_plus.png" alt="メンバー追加">
</div>
<ul>
    <li><p class="title">会社名</p><p class="title">氏名</p><p class="title">表示名</p></li>
    <li data-member_id="1"><p>(株)グッドワン</p><p>小池 修</p><p>GONE</p></li>
    <li data-member_id="2"><p>(株)ＴＫＣ</p><p>石崎 裕未</p><p>TKC-A</p></li>
    <li data-member_id="3"><p>(株)アイワ</p><p>川村 雅人</p><p>IWA-A</p></li>
    <li data-member_id="4"><p>(株)アイワ</p><p>松村 和豊</p><p>IWA-B</p></li>
</ul>
                        </div>
                    </div>
                    <div class="HSL01-slide-page-body">
                        <div class="HSL01-slide-page02 HSL01-slide-page-hidden">
<h3>作業項目</h3>
<ul>
    <li><img src="icon004_arrow_right.png" class="HSL01-list-icon">要件定義</li>
    <li><img src="icon004_arrow_right.png" class="HSL01-list-icon">外部設計</li>
    <li><img src="icon004_arrow_right.png" class="HSL01-list-icon">内部設計</li>
    <li><img src="icon004_arrow_right.png" class="HSL01-list-icon">製造・単体テスト</li>
    <li><img src="icon004_arrow_right.png" class="HSL01-list-icon">結合テスト</li>
    <li><img src="icon004_arrow_right.png" class="HSL01-list-icon">システムテスト</li>
    <li><img src="icon004_arrow_right.png" class="HSL01-list-icon">運用テスト</li>
    <li><img src="icon004_arrow_right.png" class="HSL01-list-icon">システム移行</li>
    <li><img src="icon004_arrow_right.png" class="HSL01-list-icon">運用・保守</li>
</ul>
                        </div>
                    </div>
                </div>
                <div class="HSL01-slide-tag">
                    <img src="icon001_person_team.png" class="HSL01-slide-page01-tag" alt="メンバー">
                    <img src="icon002_items.png" class="HSL01-slide-page02-tag" alt="作業項目">
                </div>
            </div>
        </div>
        <script>
function HSL01_init_getWorkItems() {
    let items = [];
    // 作業項目の一覧を取得
    let tags = document.getElementsByClassName('HSL01-slide-page02');
    if (tags.length !== 1) {
        alert('HSL01-slide-page02 class not found !');
        return items;
    }
    tags = tags.item(0).getElementsByTagName('ul');
    if (tags.length !== 1) {
        alert('list tag not found !');
        return items;
    }
    tags = tags.item(0).getElementsByTagName('li');
    if (tags.length < 1) {
        alert('no list item (li tag) not found !');
        return items;
    }
    //alert(tags.length);
    for (var liTag of tags) {
        items.push(liTag.textContent);
    }
    return items;
}

function HSL01_init_body() {
    //alert('HSL01_init_body function');
    let table = document.getElementById("HSL01-body-table");
    if (!table) {
        alert('HSL01-body-table id not found !');
        return;
    }
    let workItemList = HSL01_init_getWorkItems();
    alert(workItemList);
}

function HSL01_show_slide_body() {
    let els = document.getElementsByClassName('HSL01-slide-body');
    if (els.length !== 1) {
        console.error('no found slide body');
        return;
    }
    let c = els[0];
    c.style.display = 'block';
}
function HSL01_clear_active_tag() {
    let els = document.getElementsByClassName('HSL01-slide-tag');
    if (els.length !== 1) {
        console.error('no found slide tag container');
        return;
    }
    els = els[0].getElementsByTagName('img');
    if (els.length === 0) {
        console.error('no found slide tag');
    }
    for (let index = 0; index < els.length; ++index) {
        let imgTag = els[index];
        const iter = imgTag.classList.values();
        for (let v = iter.next(); !v.done; v = iter.next()) {
            if (v.value.match(/-tag-active$/)) {
                imgTag.classList.remove(v.value);
                break;
            }
        }
    }
}
function HSL01_hide_page() {
    let els = document.getElementsByClassName('HSL01-slide-page-body');
    if (els.length < 1) {
        console.error('no found slide tag page body');
        return;
    }
    for (let index = 0; index < els.length; ++index) {
        let pageTag = els[index].firstElementChild;
        if (!pageTag.classList.contains('HSL01-slide-page-hidden')) {
            pageTag.classList.add('HSL01-slide-page-hidden');
        }
    }
}
function HSL01_show_page(className) {
    let els = document.getElementsByClassName(className);
    if (els.length !== 1) {
        console.error('no found slide page(' + className + ')');
        return;
    }
    let c = els[0];
    c.classList.remove('HSL01-slide-page-hidden');
}
function HSL01_do_slide(className, inOut) {
    let els = document.getElementsByClassName('HSL01-slide-container');
    if (els.length !== 1) {
        console.error('no found slide container');
        return;
    }
    let c = els[0];
    let rmList = [];
    c.classList.forEach(clsName => {
        if (clsName.match(/-slidein$|-slideout$/)) {
            rmList.push(clsName);
        }
    });
    c.classList.remove(...rmList);
    c.classList.add(className + '-slide' + inOut);
}
function HSL01_is_page_actice(target) {
    const iter = target.classList.values();
    for (let v = iter.next(); !v.done; v = iter.next()) {
        if (v.value.match(/-tag-active$/)) {
            return true;
        }
    }
    return false;
}
function HSL01_clickEvent(event) {
    let target = event.target;
    let slidePage = '';
    if (target.classList.contains('HSL01-slide-page01-tag')) {
        slidePage = 'HSL01-slide-page01';
    } else if (target.classList.contains('HSL01-slide-page02-tag')) {
        slidePage = 'HSL01-slide-page02';
    }
    if (slidePage) {
        if (HSL01_is_page_actice(target)) {
            HSL01_hide_page();
            HSL01_clear_active_tag();
            HSL01_do_slide(slidePage, 'out');
        } else {
            HSL01_show_slide_body();
            HSL01_hide_page();
            HSL01_clear_active_tag();
            HSL01_show_page(slidePage);
            HSL01_do_slide(slidePage, 'in');
            target.classList.add(slidePage + '-tag-active');
        }
    }
}
window.addEventListener('load', (event) => {
    console.log('start content slider sample');
    HSL01_init_body();
    document.addEventListener('click', HSL01_clickEvent);
});
        </script>
    </body>
</html>